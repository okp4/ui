import { ArgsTable, Meta, Story, Canvas, Preview, Props } from '@storybook/addon-docs'
import { ThemeProvider } from 'ui/atoms/theme/ThemeProvider'
import { Header } from 'ui/molecules/header/Header.tsx'
import { Logo } from 'ui/atoms/logo/Logo.tsx'
import BotAnikImage from '../../../assets/botanik-logo.png'
import { Typography } from 'ui/atoms/typography/Typography.tsx'
import { useMediaType } from 'hook/useMediaType'

import './header.scss'

<Meta
  title="Molecules/Header"
  component={Header}
  parameters={{
    actions: {
      argTypesRegex: '^on.*'
    },
    docs: {
      source: {
        type: 'code'
      }
    }
  }}
  decorators={[
    Story => (
      <ThemeProvider>
        <div className="header-story-main">
          <Story />
        </div>
      </ThemeProvider>
    )
  ]}
/>

# Header

> Provides a consistent user experience and helps users navigate the site.

[![stability-unstable](https://img.shields.io/badge/stability-unstable-yellow.svg)](https://github.com/emersion/stability-badges#unstable)

## Description

**Header** is a responsive component which embeds three main elements:

- A `firstElement` that comes first in the reading flow. Typically used for logos. Will resize if larger than max size.
- A `ThemeSwitcher` which allows each application to automatically manage the themes offered by the Ã˜KP4 design system (Blue Stone / Light Stone).
- A `NavigationMenu` that displays the main navigation of your site. This set of links will be wrapped in a burger menu to fit smaller screens.

## Overview

<Story
  name="Overview"
  argTypes={{
    firstElement: {
      control: false,
      table: {
        type: { summary: 'Node' }
      }
    },
    navigationMenu: {
      control: false,
      table: {
        type: { summary: 'Node' }
      }
    }
  }}
>
  <Header firstElement={<Logo size="small" />} />
</Story>

---

### Properties

<ArgsTable story="Overview" />

## First element

Optional **firstElement** allows the user to put any type of element in the `header`.  
The size of the element is limited to a `max height` of `72px` and a responsive
`max width` of `270px` and `220px` to limit its size, making sure injected
elements conform to the layout.

<Canvas>
  <Story name="First element">
    <Header
      firstElement={
        <div style={{ display: 'flex' }}>
          <img src={BotAnikImage} alt="BotAnik image" />
          <Typography as="h1" size="x-large" color="highlighted-text" fontWeight="black">
            BotAnik Space
          </Typography>
        </div>
      }
    />
  </Story>
</Canvas>

## Navigation menu

The optional `navigationMenu` is used to hightlight the main navigation of your website.  
This responsive menu provides the user with a set of navigable links and greatly improves his experience by providing several easily accessible shortcuts.

You just have to provide it with an array of `JSX.Element` which will then be displayed on a single line on a large or medium screen, or accessible via a burger menu on a smaller or mobile screen.  
Please shorten the window to let the magic happen!

#### Navigation menu

<Canvas>
  <Story name="Navigation menu without first element">
    {() => {
      const changeHeaderDisplay = useMediaType('(max-width: 995px)')
      const links = [
        { name: 'Welcome', url: 'https://ui.okp4.space/?path=/docs/welcome--page' },
        { name: 'Philosophy', url: 'https://ui.okp4.space/?path=/docs/philosophy--page' },
        { name: 'Start', url: 'https://ui.okp4.space/?path=/docs/getting-started--page' },
        {
          name: 'Languages',
          url: 'https://ui.okp4.space/?path=/docs/guidelines-internationalization--page'
        },
        {
          name: 'Responsiveness',
          url: 'https://ui.okp4.space/?path=/docs/guidelines-responsive-web-design--page'
        }
      ]
      const navigationMenu = links.map(link => (
        <Typography as="div" fontSize="small" fontWeight="bold">
          <a href={link.url} target="_blank" style={{ wordBreak: 'normal' }}>
            {link.name}
          </a>
        </Typography>
      ))
      return <Header navigationMenu={navigationMenu} />
    }}
  </Story>
</Canvas>

#### Navigation menu with first element

<Canvas>
  <Story name="Navigation menu">
    {() => {
      const changeHeaderDisplay = useMediaType('(max-width: 995px)')
      const links = [
        { name: 'Welcome', url: 'https://ui.okp4.space/?path=/docs/welcome--page' },
        { name: 'Philosophy', url: 'https://ui.okp4.space/?path=/docs/philosophy--page' },
        { name: 'Start', url: 'https://ui.okp4.space/?path=/docs/getting-started--page' },
        {
          name: 'Languages',
          url: 'https://ui.okp4.space/?path=/docs/guidelines-internationalization--page'
        },
        {
          name: 'Responsiveness',
          url: 'https://ui.okp4.space/?path=/docs/guidelines-responsive-web-design--page'
        }
      ]
      const navigationMenu = links.map(link => (
        <Typography as="div" fontSize="small" fontWeight="bold">
          <a href={link.url} target="_blank" style={{ wordBreak: 'normal' }}>
            {link.name}
          </a>
        </Typography>
      ))
      return (
        <Header
          firstElement={<Logo size={changeHeaderDisplay ? 'x-small' : 'small'} />}
          navigationMenu={navigationMenu}
        />
      )
    }}
  </Story>
</Canvas>

## Header with theme switcher only

All the properties of the **Header** being optional, it can only contain the `ThemeSwitcher` which is directly integrated.  
In this case, it simply looks like this:

<Canvas>
  <Story name="Header with them switcher only">
    <Header />
  </Story>
</Canvas>

## Responsiveness

The component was built according to the principles of Responsive Web Design (see <a href="?path=/docs/guidelines-responsive-web-design--page">dedicated guideline</a> ) in particular thanks to the use of media queries and a responsive grid.
This allows the component to adapt to any screen size, from the smallest phone to a large desktop screen or television.

## Prerequisites

It is mandatory to wrap the component in a `<ThemeProvider />` for the `<ThemeSwitcher />` to work, like in the code snippet below.  
See <a href="?path=/docs/atoms-brand-identity-theming--theming">Theming</a> for more information.

##### **`app.tsx`**

```tsx
import React from 'react'
import { Header, ThemeProvider, Logo } from '@okp4/ui'

export const App: React.FC = () => (
  <React.StrictMode>
    <ThemeProvider>
      <Header firstElement={<Logo />} />
    </ThemeProvider>
  </React.StrictMode>
)
```
